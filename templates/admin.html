{% extends "base.html" %}
{% block content %}
<h2>–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é —Å AI</h2>
<form id="articleForm">
    <input name="title" placeholder="–¢–µ–º–∞ —Å—Ç–∞—Ç—å–∏" required style="width:100%; padding:8px; margin:5px 0;"><br>
    <input name="keywords" placeholder="–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)" style="width:100%; padding:8px; margin:5px 0;"><br>
    <select name="lang" style="padding:8px; margin:5px 0;">
        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
        <option value="en">üá¨üáß English</option>
    </select><br>
    <button type="submit" style="padding:10px 20px;">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é</button>
</form>
<div id="result" style="margin-top:20px;"></div>

<script>
document.getElementById('articleForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(e.target);
    const res = await fetch('/admin', {
        method: 'POST',
        body: formData
    });
    const data = await res.json();
    const result = document.getElementById('result');
    if (data.status === 'success') {
        result.innerHTML = `<p style="color:green;">‚úÖ –°—Ç–∞—Ç—å—è —Å–æ–∑–¥–∞–Ω–∞! <a href="${data.url}">–û—Ç–∫—Ä—ã—Ç—å</a></p>`;
    } else {
        result.innerHTML = `<p style="color:red;">‚ùå ${data.message || '–û—à–∏–±–∫–∞'}</p>`;
    }
});
</script>
{% endblock %}
